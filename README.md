# AI æ—¥ç¨‹åŠ©æ‰‹

ä½¿ç”¨ AI è§£æè‡ªç„¶è¯­è¨€å¹¶è‡ªåŠ¨ç”Ÿæˆæ—¥å†äº‹ä»¶çš„æ™ºèƒ½æ—¥ç¨‹åŠ©æ‰‹ã€‚æ”¯æŒè‡ªç„¶è¯­è¨€è¾“å…¥ï¼ŒAI è‡ªåŠ¨è§£ææ—¶é—´ã€åœ°ç‚¹ã€äº‹ä»¶ç±»å‹ç­‰ä¿¡æ¯ï¼Œç”Ÿæˆç¬¦åˆ FullCalendar æ ‡å‡†çš„æ—¥å†äº‹ä»¶ã€‚

## é¡¹ç›®æ¦‚è¿°

ç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æè¿°ä»»åŠ¡ï¼ˆå¦‚"æ˜å¤©ä¸‹åˆ3ç‚¹å’Œè€æ¿å¼€ä¼š"ï¼‰ï¼ŒAI è‡ªåŠ¨è§£æå¹¶ç”Ÿæˆå¯è·¨å¹³å°ä½¿ç”¨çš„æ—¥å†äº‹ä»¶ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œåç«¯ä½¿ç”¨ OpenAI Structured Outputs ä¿è¯æ•°æ®æ ¼å¼å‡†ç¡®æ€§ï¼Œå‰ç«¯ä½¿ç”¨ Next.js + FullCalendar æä¾›ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âš¡ **å¿«é€Ÿè§£æ**: "æ˜å¤©ä¸‹åˆ3ç‚¹å¼€ä¼š" â†’ 2-5ç§’ç”Ÿæˆæ—¥ç¨‹
- ğŸ¯ **é«˜å‡†ç¡®åº¦**: OpenAI Structured Outputs ä¿è¯ 100% æ ¼å¼æ­£ç¡®
- ğŸŒ **ç°ä»£åŒ–ç•Œé¢**: Next.js + React + FullCalendar + Tailwind CSS
- ğŸ”§ **ç”Ÿäº§çº§ä»£ç **: å®Œæ•´çš„é”™è¯¯å¤„ç†ã€å‚æ•°éªŒè¯ã€æ—¥å¿—ç³»ç»Ÿ
- ğŸŒ **ä»£ç†æ”¯æŒ**: å†…ç½®ä»£ç†é…ç½®ï¼Œæ”¯æŒä¸­å›½å¤§é™†ç”¨æˆ·è®¿é—® OpenAI API
- ğŸ“± **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸ¨ **ç¾è§‚ UI**: ä½¿ç”¨ shadcn/ui ç»„ä»¶åº“ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼

## æŠ€æœ¯æ ˆ

### åç«¯
- **Node.js** + **Express** - Web æ¡†æ¶
- **OpenAI API** - ä½¿ç”¨ Structured Outputs è¿›è¡Œè‡ªç„¶è¯­è¨€è§£æ
- **axios** - HTTP å®¢æˆ·ç«¯ï¼ˆæ”¯æŒä»£ç†ï¼‰
- **FullCalendar å…¼å®¹æ ¼å¼** - æ ‡å‡†åŒ–çš„æ—¥å†äº‹ä»¶æ•°æ®ç»“æ„

### å‰ç«¯
- **Next.js 16** - React æ¡†æ¶
- **React 19** - UI åº“
- **FullCalendar** - æ—¥å†ç»„ä»¶
- **Tailwind CSS** - æ ·å¼æ¡†æ¶
- **shadcn/ui** - UI ç»„ä»¶åº“
- **Framer Motion** - åŠ¨ç”»åº“
- **TypeScript** - ç±»å‹å®‰å…¨

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- npm æˆ– pnpm
- OpenAI API Keyï¼ˆéœ€è¦æ”¯æŒ Structured Outputs çš„æ¨¡å‹ï¼Œå¦‚ `gpt-4o-2024-11-20`ï¼‰
- ï¼ˆå¯é€‰ï¼‰ä»£ç†æœåŠ¡å™¨ï¼ˆä¸­å›½å¤§é™†ç”¨æˆ·éœ€è¦ï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd AI-Schedule-Assistant
```

### 2. é…ç½®åç«¯

```bash
cd backend
npm install
```

åˆ›å»º `backend/.env` æ–‡ä»¶ï¼š

```env
# OpenAI é…ç½®
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4o-2024-11-20

# æœåŠ¡å™¨é…ç½®
PORT=5000
NODE_ENV=development
LOG_LEVEL=info

# ä»£ç†é…ç½®ï¼ˆä¸­å›½å¤§é™†ç”¨æˆ·éœ€è¦ï¼‰
# HTTP_PROXY=http://127.0.0.1:7897
# HTTPS_PROXY=http://127.0.0.1:7897
# ENABLE_PROXY=true
```

**ä»£ç†é…ç½®è¯´æ˜**ï¼š
- å¦‚æœåœ¨ä¸­å›½å¤§é™†ï¼Œéœ€è¦é…ç½®ä»£ç†æ‰èƒ½è®¿é—® OpenAI API
- å°† `HTTP_PROXY` å’Œ `HTTPS_PROXY` è®¾ç½®ä¸ºæ‚¨çš„ä»£ç†åœ°å€ï¼ˆå¦‚ Clashã€V2Ray ç­‰ï¼‰
- å¦‚æœä¸éœ€è¦ä»£ç†ï¼Œå¯ä»¥è®¾ç½® `ENABLE_PROXY=false` æˆ–æ³¨é‡Šæ‰ä»£ç†é…ç½®

### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
npm start
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:5000` å¯åŠ¨ã€‚

### 4. é…ç½®å‰ç«¯

```bash
cd frontend
pnpm install  # æˆ– npm install
```

åˆ›å»º `frontend/.env.local` æ–‡ä»¶ï¼š

```env
# åç«¯ API åœ°å€
NEXT_PUBLIC_API_BASE_URL=http://localhost:5000
```

### 5. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
cd frontend
pnpm dev  # æˆ– npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

### 6. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`ï¼Œå¼€å§‹ä½¿ç”¨ AI æ—¥ç¨‹åŠ©æ‰‹ï¼

## é¡¹ç›®ç»“æ„

```
AI-Schedule-Assistant/
â”œâ”€â”€ backend/                    # åç«¯ API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ openai.js      # OpenAI é…ç½®
â”‚   â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ parse.controller.js
â”‚   â”‚   â”œâ”€â”€ middlewares/       # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ error-handler.js
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.js
â”‚   â”‚   â”‚   â””â”€â”€ validation.js
â”‚   â”‚   â”œâ”€â”€ prompts/           # System Prompt
â”‚   â”‚   â”‚   â””â”€â”€ system-prompt.js
â”‚   â”‚   â”œâ”€â”€ schemas/           # JSON Schema
â”‚   â”‚   â”‚   â””â”€â”€ event-schema.js
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ error-codes.js
â”‚   â”‚   â”‚   â””â”€â”€ timezone-validator.js
â”‚   â”‚   â””â”€â”€ app.js             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                   # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/                   # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ page.tsx           # ä¸»é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx        # å¸ƒå±€
â”‚   â”‚   â””â”€â”€ globals.css       # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ calendar/          # æ—¥å†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ input/            # è¾“å…¥ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ui/               # UI ç»„ä»¶ï¼ˆshadcn/uiï¼‰
â”‚   â”œâ”€â”€ lib/                  # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ api/              # API è°ƒç”¨
â”‚   â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ test-page/                 # ç®€å•æµ‹è¯•é¡µé¢ï¼ˆHTML + FullCalendarï¼‰
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ styles.css
â””â”€â”€ README.md
```

## API æ–‡æ¡£

### å¥åº·æ£€æŸ¥

```bash
GET /health
```

### è§£ææ—¥ç¨‹

```bash
POST /api/v1/events/parse
Content-Type: application/json

{
  "text": "æ˜å¤©ä¸‹åˆ3ç‚¹å’Œè€æ¿å¼€ä¼š1å°æ—¶",
  "context": {
    "current_time": "2026-01-02T10:00:00+08:00",
    "timezone": "Asia/Shanghai",
    "locale": "zh-CN"
  },
  "options": {
    "default_duration": 60,
    "allow_past_events": false,
    "max_events": 10
  }
}
```

è¯¦ç»† API æ–‡æ¡£è¯·å‚è€ƒ [backend/README.md](backend/README.md)

## åŠŸèƒ½ç‰¹æ€§

### æ—¶é—´è§£æèƒ½åŠ›

- âœ… ç›¸å¯¹æ—¶é—´ï¼š"æ˜å¤©"ã€"åå¤©"ã€"ä¸‹å‘¨"ã€"æœˆåº•"
- âœ… æ¨¡ç³Šæ—¶é—´ï¼š"æ—©ä¸Š"ã€"ä¸‹åˆ"ã€"æ™šä¸Š"ã€"ä¸­åˆ"
- âœ… ç²¾ç¡®æ—¶é—´ï¼š"3ç‚¹"ã€"15:30"ã€"3ç‚¹åŠ"
- âœ… æ—¶é•¿æ¨æ–­ï¼šæ ¹æ®äº‹ä»¶ç±»å‹è‡ªåŠ¨æ¨æ–­æ—¶é•¿
- âœ… å…¨å¤©äº‹ä»¶ï¼šè‡ªåŠ¨è¯†åˆ«å…¨å¤©äº‹ä»¶
- âœ… é‡å¤äº‹ä»¶ï¼šæ”¯æŒæ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆç­‰é‡å¤è§„åˆ™

### äº‹ä»¶åˆ†ç±»

- å·¥ä½œï¼ˆworkï¼‰ï¼šä¼šè®®ã€è®¨è®ºã€ç«™ä¼šç­‰
- ä¸ªäººï¼ˆpersonalï¼‰ï¼šçº¦ä¼šã€èšé¤ã€å¨±ä¹ç­‰
- å¥åº·ï¼ˆhealthï¼‰ï¼šå¥èº«ã€ä½“æ£€ã€è¿åŠ¨ç­‰
- å…¶ä»–ï¼ˆotherï¼‰ï¼šå…¶ä»–ç±»å‹äº‹ä»¶

### é”™è¯¯å¤„ç†

- å®Œæ•´çš„é”™è¯¯ç ç³»ç»Ÿï¼ˆE1xxx å®¢æˆ·ç«¯é”™è¯¯ï¼ŒE5xxx æœåŠ¡å™¨é”™è¯¯ï¼‰
- å‹å¥½çš„é”™è¯¯æç¤ºå’Œå»ºè®®
- è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼ˆç½‘ç»œé”™è¯¯æ—¶ï¼‰

## å¼€å‘è®¡åˆ’

- [x] Phase 0: æ ¸å¿ƒèƒ½åŠ›éªŒè¯
- [x] Phase 1: åç«¯ API å®ç°
- [x] Phase 2: æµ‹è¯•é¡µé¢ï¼ˆHTML + FullCalendarï¼‰
- [x] Phase 3: React å‰ç«¯ï¼ˆNext.js + FullCalendarï¼‰
- [x] Phase 4: ä»£ç†æ”¯æŒï¼ˆä¸­å›½å¤§é™†ç”¨æˆ·ï¼‰
- [ ] Phase 5: æ•°æ®æŒä¹…åŒ–ï¼ˆæ•°æ®åº“é›†æˆï¼‰
- [ ] Phase 6: ç”¨æˆ·è®¤è¯
- [ ] Phase 7: PWA æ”¯æŒ
- [ ] Phase 8: æ—¥å†å¯¼å‡ºï¼ˆiCalã€Google Calendarï¼‰

## å¸¸è§é—®é¢˜

### 1. ä»£ç†è¿æ¥å¤±è´¥

å¦‚æœåœ¨ä¸­å›½å¤§é™†ï¼Œéœ€è¦é…ç½®ä»£ç†æ‰èƒ½è®¿é—® OpenAI APIã€‚ç¡®ä¿ï¼š
- ä»£ç†æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆå¦‚ Clashã€V2Rayï¼‰
- `backend/.env` ä¸­æ­£ç¡®é…ç½®äº† `HTTP_PROXY` å’Œ `HTTPS_PROXY`
- ä»£ç†ç«¯å£æ­£ç¡®ï¼ˆé»˜è®¤ 7897ï¼‰

### 2. API Key æ— æ•ˆ

- ç¡®ä¿ API Key æ ¼å¼æ­£ç¡®ï¼ˆä»¥ `sk-` å¼€å¤´ï¼‰
- ç¡®ä¿ API Key æœ‰è¶³å¤Ÿçš„é¢åº¦
- ç¡®ä¿ä½¿ç”¨çš„æ¨¡å‹æ”¯æŒ Structured Outputsï¼ˆå¦‚ `gpt-4o-2024-11-20`ï¼‰

### 3. å‰ç«¯æ— æ³•è¿æ¥åç«¯

- ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:5000`
- æ£€æŸ¥ `frontend/.env.local` ä¸­çš„ `NEXT_PUBLIC_API_BASE_URL` é…ç½®
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚é”™è¯¯

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT
